# ISP Test Suite: MaHarNet 5G Diagnostics & Optimization
> **A specialized forensic toolkit for diagnosing "Silent Packet Drops" and "Stalls" on restrictive ISP networks.**

This repository contains the complete toolchain used to identify, isolate, and fix the **MTU Blackhole** issue affecting modern AI applications (gRPC/HTTP2) on the MaHarNet 5G network.

---

## ðŸš€ Quick Start (Fix the Stall)
If you just want to stop your connection from hanging/freezing, run the host optimization script. This applies the proven **MSS 1320 Clamp** to your WiFi adapter.

```bash
# Apply automatic fix (Fixes Stalls)
sudo ./optimize_host_network.sh

# Persistence (Apply on boot/reconnect)
sudo ./install_persistence.sh
```

---

## ðŸ› ï¸ The Toolbox
This suite is divided into **Isolation**, **Diagnosis**, and **Verification** tools.

| Tool File | Purpose |
| :--- | :--- |
| `core/wifibox.py` | **Core Engine**. Creates an isolated Network Namespace (`internet_box`) and moves your WiFi card inside it for safe testing without breaking the Host's connectivity. |
| `diagnostics/simulate_stall.sh` | **The Litmus Test**. Sends a ~5KB payload to Google Gemini. If this hangs, your network has the MTU Blackhole bug. |
| `diagnostics/simulate_stream.sh` | **Stability Check**. Simulates a long-running, slow stream (like a Chatbot response) to verify anti-stall stability over time. |
| `diagnostics/health_check.sh` | **General Vitals**. Checks Ping, DNS, Jitter, and Packet Loss (Google vs Gateway) to differentiate "Congestion" from "Stalls". |
| `setup/optimize_host_network.sh` | **The Fix**. Applies `iptables` rules to clamp TCP MSS to 1320 bytes on the host. |
| `docs/maharnet_soc_report.md` | **Documentation**. A technical incident report generated for ISP Support/SOC teams. |

---

## ðŸ” How It Works (The 5-Phase Analysis)
For a deep dive into the methodology, read the **[Methodological Walkthrough](isp_test_suite_guide.md)**.

1.  **Isolation**: We move `wlp1s0` into a sandbox container (`wifibox`) to test the raw radio link safely.
2.  **Diagnosis**: We probe for the "Silent Drop" threshold (found at >1400 bytes).
3.  **Tuning**: We discover that **MSS 1320** is the safe maximum.
4.  **Migration**: We apply this kernel rule to the main Host OS.
5.  **Verification**: We prove that 10% packet loss (ISP Congestion) is distinct from Stalls (MTU Bug).

---

## ðŸ“‚ Documentation
- **[Usage Guide (Walkthrough)](isp_test_suite_guide.md)**: Detailed step-by-step of the troubleshooting session.
- **[Deep Architecture](WIFIBOX_README.md)**: Conceptual explanation of the "Modern AI vs Legacy ISP" conflict.
- **[SOC Report](maharnet_soc_report.md)**: The findings sent to MaHarNet Engineering.

---

**Maintainer:** Thaw Zin  
*Generated by AntiGravity Agent*
